{"version":3,"file":"static/js/103.4249e648.chunk.js","mappings":"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","sources":["assets/logo.svg","utils/user.ts","components/id-select.tsx","components/user-select.tsx","pages/project-list/search-panel.tsx","components/pin.tsx","utils/reorder.ts","utils/use-optimistic-options.ts","utils/project.ts","utils/url.ts","pages/project-list/util.ts","pages/project-list/list.tsx","pages/project-list/index.tsx","utils/kanbans.ts","utils/tasks.ts","pages/kanban/util.ts","utils/task-type.ts","assets/task.svg","assets/bug.svg","pages/kanban/create-task.tsx","components/mark.tsx","components/drag-drop.tsx","pages/kanban/kanban-column.tsx","components/task-type-select.tsx","pages/kanban/search-panel.tsx","pages/kanban/create-kanban.tsx","pages/kanban/task-modal.tsx","pages/kanban/index.tsx","pages/epic/util.ts","pages/project-list/project-modal.tsx","pages/epic/create-epic.tsx","utils/epic.ts","pages/epic/index.tsx","pages/project/index.tsx","components/project-popover.tsx","components/user-popover.tsx","authenticated-app.tsx"],"sourcesContent":["var _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgLogo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 69 32\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    focusable: \"false\",\n    \"aria-hidden\": \"true\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"linearGradient\", {\n    x1: \"98.0308675%\",\n    y1: \"0.160599572%\",\n    x2: \"58.8877062%\",\n    y2: \"40.7655246%\",\n    id: \"uid5\"\n  }, /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#0052CC\",\n    offset: \"18%\"\n  }), /*#__PURE__*/React.createElement(\"stop\", {\n    stopColor: \"#2684FF\",\n    offset: \"100%\"\n  })))), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    stroke: \"none\",\n    strokeWidth: 1,\n    fillRule: \"nonzero\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22.9366667,4 L11.41,4 C11.41,5.3800098 11.9582068,6.703498 12.934021,7.67931228 C13.9098353,8.65512657 15.2333235,9.20333333 16.6133333,9.20333333 L18.7366667,9.20333333 L18.7366667,11.2533333 C18.7385054,14.1244521 21.0655479,16.4514946 23.9366667,16.4533333 L23.9366667,5 C23.9366667,4.44771525 23.4889514,4 22.9366667,4 Z\",\n    fill: \"currentColor\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17.2333333,9.74333333 L5.70666667,9.74333333 C5.70850536,12.6144521 8.03554792,14.9414946 10.9066667,14.9433333 L13.03,14.9433333 L13.03,17 C13.0336786,19.8711178 15.3622132,22.196669 18.2333333,22.1966667 L18.2333333,10.7433333 C18.2333333,10.1910486 17.7856181,9.74333333 17.2333333,9.74333333 Z\",\n    fill: \"url(#uid5)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.5266667,15.4833333 L0,15.4833333 C3.51929402e-16,18.357055 2.32961169,20.6866667 5.20333333,20.6866667 L7.33333333,20.6866667 L7.33333333,22.7366667 C7.33516565,25.6051863 9.65815176,27.9311544 12.5266667,27.9366667 L12.5266667,16.4833333 C12.5266667,15.9310486 12.0789514,15.4833333 11.5266667,15.4833333 Z\",\n    fill: \"url(#uid5)\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M37.07,18.956 C37.07,20.646 36.394,21.842 34.418,21.842 C33.56,21.842 32.702,21.686 32,21.4 L32,23.662 C32.65,23.896 33.586,24.104 34.808,24.104 C38.032,24.104 39.41,21.946 39.41,18.8 L39.41,6.918 L37.07,6.918 L37.07,18.956 Z M42.894,7.568 C42.894,8.556 43.544,9.128 44.454,9.128 C45.364,9.128 46.014,8.556 46.014,7.568 C46.014,6.58 45.364,6.008 44.454,6.008 C43.544,6.008 42.894,6.58 42.894,7.568 Z M43.31,24 L45.546,24 L45.546,11 L43.31,11 L43.31,24 Z M48.926,24 L51.11,24 L51.11,16.33 C51.11,13.574 52.852,12.716 55.712,13.002 L55.712,10.818 C53.164,10.662 51.864,11.754 51.11,13.288 L51.11,11 L48.926,11 L48.926,24 Z M66.45,24 L66.45,21.66 C65.618,23.376 64.058,24.26 62.056,24.26 C58.598,24.26 56.856,21.322 56.856,17.5 C56.856,13.834 58.676,10.74 62.316,10.74 C64.214,10.74 65.67,11.598 66.45,13.288 L66.45,11 L68.686,11 L68.686,24 L66.45,24 Z M59.092,17.5 C59.092,20.62 60.34,22.18 62.654,22.18 C64.656,22.18 66.45,20.906 66.45,18.02 L66.45,16.98 C66.45,14.094 64.812,12.82 62.914,12.82 C60.392,12.82 59.092,14.484 59.092,17.5 Z\",\n    fillRule: \"evenodd\",\n    fill: \"inherit\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgLogo);\nexport default __webpack_public_path__ + \"static/media/logo.a1c02bdc6c8da6d6bece64f8185177ad.svg\";\nexport { ForwardRef as ReactComponent };","import { useHTTP } from \"./http\";\r\nimport { User } from \"../types\";\r\nimport { useQuery } from \"react-query\";\r\n\r\n/*export const useUsers = (param?: Partial<User>) => {\r\n  const client = useHTTP();\r\n\r\n  const { run, ...result } = useAsync<User[]>();\r\n  // 监听param改变，触发时重新请求数据\r\n  useEffect(() => {\r\n    run(client(\"users\", { data: cleanObject(param || {}) }));\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [param]);\r\n  return result;\r\n};*/\r\nexport const useUsers = (param?: Partial<User>) => {\r\n  const client = useHTTP();\r\n  return useQuery<User[], Error>([\"users\", param], () =>\r\n    client(\"users\", { data: param })\r\n  );\r\n};\r\n","import { Raw } from \"../types\";\r\nimport { Select } from \"antd\";\r\nimport React from \"react\";\r\n\r\ntype SelectProps = React.ComponentProps<typeof Select>;\r\n\r\ninterface IDSelectProps\r\n  extends Omit<SelectProps, \"value\" | \"onChange\" | \"options\"> {\r\n  value?: Raw | null | undefined;\r\n  onChange?: (value?: number) => void;\r\n  defaultOptionName?: string;\r\n  options?: {\r\n    name: string;\r\n    id: number;\r\n  }[];\r\n}\r\n\r\n/**\r\n * value 可以传入多种类型的值\r\n * onChange 只会回调 number|undefined 类型\r\n * 当 isNaN(Number(value)) 为true的时候，代表选择默认\r\n * 当选择默认类型时，onChange会回调undefined\r\n * @constructor\r\n * @param props\r\n */\r\nexport const IDSelect = (props: IDSelectProps) => {\r\n  const { value, onChange, defaultOptionName, options, ...restProps } = props;\r\n  return (\r\n    <Select\r\n      value={options?.length ? toNumber(value) : 0}\r\n      onChange={(value) => onChange?.(toNumber(value) || undefined)}\r\n      {...restProps}\r\n    >\r\n      {defaultOptionName ? (\r\n        <Select.Option value={0}>{defaultOptionName}</Select.Option>\r\n      ) : null}\r\n      {options?.map((option) => (\r\n        <Select.Option key={option.id} value={option.id}>\r\n          {option.name}\r\n        </Select.Option>\r\n      ))}\r\n    </Select>\r\n  );\r\n};\r\nconst toNumber = (val: unknown) => (isNaN(Number(val)) ? 0 : Number(val));\r\n","import { useUsers } from \"../utils/user\";\r\nimport React from \"react\";\r\nimport { IDSelect } from \"./id-select\";\r\n\r\nexport const UserSelect = (props: React.ComponentProps<typeof IDSelect>) => {\r\n  const { data: users } = useUsers();\r\n  return <IDSelect options={users || []} {...props} />;\r\n};\r\n","import React from \"react\";\r\nimport { Form, Input } from \"antd\";\r\nimport { UserSelect } from \"../../components/user-select\";\r\nimport { Project, User } from \"../../types\";\r\n\r\ninterface SearchPanelProps {\r\n  users: User[];\r\n  param: Partial<Pick<Project, \"name\" | \"personId\">>;\r\n  setParam: (param: SearchPanelProps[\"param\"]) => void;\r\n}\r\n\r\nexport const SearchPanel = ({ param, setParam }: SearchPanelProps) => {\r\n  return (\r\n    <Form style={{ marginBottom: \"2rem\" }} layout={\"inline\"}>\r\n      <Form.Item>\r\n        {/*setParam(Object.assign({},param,{name: evt.target.value}))*/}\r\n        <Input\r\n          type=\"text\"\r\n          placeholder={\"项目名\"}\r\n          value={param.name}\r\n          onChange={(evt) =>\r\n            setParam({\r\n              ...param,\r\n              name: evt.target.value,\r\n            })\r\n          }\r\n        />\r\n      </Form.Item>\r\n      <Form.Item>\r\n        <UserSelect\r\n          defaultOptionName=\"负责人\"\r\n          value={param.personId}\r\n          onChange={(value) =>\r\n            setParam({\r\n              ...param,\r\n              personId: value,\r\n            })\r\n          }\r\n        />\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Rate } from \"antd\";\r\n\r\ninterface PinProps extends React.ComponentProps<typeof Rate> {\r\n  checked: boolean;\r\n  onCheckChange?: (checked: boolean) => void;\r\n}\r\n\r\nexport const Pin = ({ checked, onCheckChange, ...restProps }: PinProps) => {\r\n  return (\r\n    <Rate\r\n      count={1}\r\n      value={checked ? 1 : 0}\r\n      onChange={(num) => onCheckChange?.(Boolean(num))}\r\n      {...restProps}\r\n    />\r\n  );\r\n};\r\n","/**\r\n * 在本地对排序进行乐观更新\r\n * @param fromId 要排序的项目的id\r\n * @param type 'before' | 'after'\r\n * @param referenceId 参照id\r\n * @param list 要排序的列表, 比如tasks, kanbans\r\n */\r\nexport const reorder = ({\r\n  fromId,\r\n  type,\r\n  toId,\r\n  list,\r\n}: {\r\n  list: { id: number }[];\r\n  fromId: number;\r\n  type: \"after\" | \"before\";\r\n  toId: number;\r\n}) => {\r\n  const clonedList = [...list];\r\n  // 找到fromId对应项目的下标\r\n  const movingItemIndex = clonedList.findIndex((item) => item.id === fromId);\r\n  if (!toId) {\r\n    return insertAfter([...clonedList], movingItemIndex, clonedList.length - 1);\r\n  }\r\n  const targetIndex = clonedList.findIndex((item) => item.id === toId);\r\n  const insert = type === \"after\" ? insertAfter : insertBefore;\r\n  return insert([...clonedList], movingItemIndex, targetIndex);\r\n};\r\n\r\n/**\r\n * 在list中，把from移到to的前边\r\n * @param list\r\n * @param from\r\n * @param to\r\n */\r\nconst insertBefore = (list: unknown[], from: number, to: number) => {\r\n  const toItem = list[to];\r\n  const removedItem = list.splice(from, 1)[0];\r\n  const toIndex = list.indexOf(toItem);\r\n  list.splice(toIndex, 0, removedItem);\r\n  return list;\r\n};\r\n\r\n/**\r\n * 在list中，把from放在to的后面\r\n * @param list\r\n * @param from\r\n * @param to\r\n */\r\nconst insertAfter = (list: unknown[], from: number, to: number) => {\r\n  const toItem = list[to];\r\n  const removedItem = list.splice(from, 1)[0];\r\n  const toIndex = list.indexOf(toItem);\r\n  list.splice(toIndex + 1, 0, removedItem);\r\n  return list;\r\n};\r\n","import { QueryKey, useQueryClient } from \"react-query\";\r\nimport { reorder } from \"./reorder\";\r\nimport { Task } from \"../types\";\r\n\r\n/**\r\n * 乐观更新的配置\r\n * @param queryKey\r\n * @param callback 用于传入`增删改`的处理逻辑\r\n */\r\nexport const useOptimisticConfig = (\r\n  queryKey: QueryKey,\r\n  callback: (target: any, old?: any[]) => any[]\r\n) => {\r\n  const queryClient = useQueryClient();\r\n\r\n  return {\r\n    onSuccess: () => queryClient.invalidateQueries(queryKey),\r\n    // 激发网络请求之前激活该函数\r\n    async onMutate(target: any) {\r\n      const previousItems = queryClient.getQueryData(queryKey);\r\n      queryClient.setQueryData(queryKey, (old?: any[]) => {\r\n        return callback(target, old);\r\n      });\r\n      return {\r\n        previousItems,\r\n      };\r\n    },\r\n    onError: (error: any, newItem: any, context: any) => {\r\n      // 失败时则回滚\r\n      queryClient.setQueryData(queryKey, context.previousItems);\r\n    },\r\n  };\r\n};\r\nexport const useDelConfig = (query: QueryKey) =>\r\n  useOptimisticConfig(\r\n    query,\r\n    (target, old) => old?.filter((item) => item.id !== target.id) || []\r\n  );\r\nexport const useEditConfig = (query: QueryKey) =>\r\n  useOptimisticConfig(\r\n    query,\r\n    (target, old) =>\r\n      old?.map((item) =>\r\n        item.id === target.id ? { ...item, ...target } : item\r\n      ) || []\r\n  );\r\nexport const useAddConfig = (query: QueryKey) =>\r\n  useOptimisticConfig(query, (target, old) => (old ? [...old, target] : []));\r\n\r\nexport const useReorderKanbanConfig = (queryKey: QueryKey) =>\r\n  useOptimisticConfig(queryKey, (target, old) => {\r\n    return reorder({ list: old, ...target });\r\n  });\r\n\r\nexport const useReorderTaskConfig = (queryKey: QueryKey) =>\r\n  useOptimisticConfig(queryKey, (target, old) => {\r\n    const orderedList = reorder({ list: old, ...target }) as Task[];\r\n    return orderedList.map((item) =>\r\n      item.id === target.fromId\r\n        ? { ...item, kanbanId: target.toKanbanId }\r\n        : item\r\n    );\r\n  });\r\n","import { useHTTP } from \"./http\";\r\nimport { QueryKey, useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { useDelConfig, useEditConfig } from \"./use-optimistic-options\";\r\nimport { Project } from \"../types\";\r\n\r\n/**\r\n * 查询 project\r\n * @param param\r\n */\r\nexport const useProjects = (param?: Partial<Project>) => {\r\n  const client = useHTTP();\r\n  return useQuery<Project[], Error>([\"projects\", param], () =>\r\n    client(\"projects\", { data: param })\r\n  );\r\n};\r\n/**\r\n * 修改 project\r\n */\r\nexport const useEditProject = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n  // 传入queryKey可避免不同页面使用组件导致的缓存不一致问题,提升通用性\r\n  // const [searchParams] = useProjectsSearchParam();\r\n  // const queryKey = [\"projects\", searchParams];\r\n\r\n  // useMutation一般不参与缓存\r\n  return useMutation(\r\n    (params: Partial<Project>) =>\r\n      client(`projects/${params.id}`, {\r\n        data: params,\r\n        method: \"PATCH\",\r\n      }),\r\n    // 成功时清理projects请求数据，触发重新刷新\r\n    useEditConfig(queryKey)\r\n  );\r\n};\r\n\r\n/**\r\n * 添加 project\r\n */\r\nexport const useAddProject = () => {\r\n  const client = useHTTP();\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation(\r\n    (params: Partial<Project>) =>\r\n      client(`projects`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    { onSuccess: () => queryClient.invalidateQueries(\"projects\") }\r\n  );\r\n};\r\n/**\r\n * 删除 project\r\n */\r\nexport const useDelProject = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n\r\n  return useMutation(\r\n    (id: number) =>\r\n      client(`projects/${id}`, {\r\n        method: \"DELETE\",\r\n      }),\r\n    useDelConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useProject = (id?: number) => {\r\n  const client = useHTTP();\r\n  return useQuery<Project>(\r\n    [\"project\", { id }],\r\n    () => client(`projects/${id}`),\r\n    // id不为空时才会触发\r\n    { enabled: Boolean(id) }\r\n  );\r\n};\r\n","import { URLSearchParamsInit, useSearchParams } from \"react-router-dom\";\r\nimport { useMemo } from \"react\";\r\nimport { cleanObject } from \"./index\";\r\n\r\n/**\r\n * 返回页面URL中，指定键的参数值\r\n * @param keys\r\n */\r\nexport const useQueryParam = <K extends string>(keys: K[]) => {\r\n  const [searchParams] = useSearchParams();\r\n  const setUrlSearchParams = useSetUrlSearchParam();\r\n\r\n  return [\r\n    useMemo(\r\n      () =>\r\n        keys.reduce((prev, key) => {\r\n          return { ...prev, [key]: searchParams.get(key) || \"\" };\r\n        }, {} as { [key in K]: string }),\r\n      // eslint-disable-next-line react-hooks/exhaustive-deps\r\n      [searchParams]\r\n    ),\r\n    (params: Partial<{ [key in K]: unknown }>) => {\r\n      return setUrlSearchParams(params);\r\n    },\r\n    /**\r\n     * as const 用于解决元组、函数解构等类型推断问题\r\n     */\r\n  ] as const;\r\n};\r\n\r\nexport const useSetUrlSearchParam = () => {\r\n  // useState会解决对象实例比较问题\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  return (params: { [key in string]: unknown }) => {\r\n    const o = cleanObject({\r\n      ...Object.fromEntries(searchParams),\r\n      ...params,\r\n    }) as URLSearchParamsInit;\r\n    return setSearchParams(o);\r\n  };\r\n};\r\n","import { useQueryParam, useSetUrlSearchParam } from \"../../utils/url\";\r\nimport { useMemo } from \"react\";\r\nimport { useProject } from \"../../utils/project\";\r\n\r\n/**\r\n * URL？name=&personId=的组件状态解析封装\r\n */\r\nexport const useProjectsSearchParam = () => {\r\n  const [param, setParam] = useQueryParam([\"name\", \"personId\"]);\r\n  return [\r\n    useMemo(\r\n      () => ({\r\n        ...param,\r\n        // 重复创建对象\r\n        personId: Number(param.personId) || undefined,\r\n      }),\r\n      [param]\r\n    ),\r\n    setParam,\r\n  ] as const;\r\n};\r\nexport const useProjectsQueryKey = () => {\r\n  const [params] = useProjectsSearchParam();\r\n  return [\"projects\", params];\r\n};\r\n/**\r\n * 利用URL实现的modal全局状态\r\n */\r\nexport const useProjectModal = () => {\r\n  const [{ projectCreate }, setProjectCreate] = useQueryParam([\r\n    \"projectCreate\",\r\n  ]);\r\n  const [{ editingProjectId }, setEditingProjectId] = useQueryParam([\r\n    \"editingProjectId\",\r\n  ]);\r\n\r\n  const { data: editingProject, isLoading } = useProject(\r\n    Number(editingProjectId)\r\n  );\r\n  const setUrlParams = useSetUrlSearchParam();\r\n\r\n  const open = () => setProjectCreate({ projectCreate: true });\r\n  const close = () => setUrlParams({ projectCreate: \"\", editingProjectId: \"\" });\r\n  const startEdit = (id: number) =>\r\n    setEditingProjectId({ editingProjectId: id });\r\n\r\n  return {\r\n    projectModalOpen: projectCreate === \"true\" || Boolean(editingProjectId),\r\n    open,\r\n    close,\r\n    startEdit,\r\n    editingProject,\r\n    isLoading,\r\n  };\r\n};\r\n","import React from \"react\";\r\nimport { Dropdown, Menu, Modal, Table, TableProps } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Pin } from \"../../components/pin\";\r\nimport { useDelProject, useEditProject } from \"../../utils/project\";\r\nimport { ButtonNoPadding } from \"../../components/lib\";\r\nimport { useProjectModal, useProjectsQueryKey } from \"./util\";\r\nimport { Project, User } from \"../../types\";\r\n\r\ninterface ListProps extends TableProps<Project> {\r\n  users: User[];\r\n  refresh?: () => void;\r\n}\r\n\r\nexport const List = ({ users, ...props }: ListProps) => {\r\n  const { mutate } = useEditProject(useProjectsQueryKey());\r\n  // 延迟求值\r\n  const pinProject = (id: number) => (pin: boolean) => mutate({ id, pin });\r\n\r\n  return (\r\n    <Table\r\n      rowKey={\"id\"}\r\n      pagination={false}\r\n      columns={[\r\n        {\r\n          title: <Pin checked={true} disabled={true} />,\r\n          render(val, project) {\r\n            return (\r\n              <Pin\r\n                checked={project.pin}\r\n                onCheckChange={pinProject(project.id)}\r\n              />\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"名称\",\r\n          sorter: (a, b) => a.name.localeCompare(b.name),\r\n          render(v, project) {\r\n            return <Link to={String(project.id)}>{project.name}</Link>;\r\n          },\r\n        },\r\n        {\r\n          title: \"部门\",\r\n          dataIndex: \"organization\",\r\n        },\r\n        {\r\n          title: \"负责人\",\r\n          render(value, project) {\r\n            return (\r\n              <span>\r\n                {users.find((user) => user.id === project.personId)?.name ||\r\n                  \"未知\"}\r\n              </span>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          render(value, project) {\r\n            return (\r\n              <span>\r\n                {project.created\r\n                  ? dayjs(project.created).format(\"YYYY-MM-DD\")\r\n                  : \"无\"}\r\n              </span>\r\n            );\r\n          },\r\n        },\r\n        {\r\n          render(value, project) {\r\n            return <More project={project} />;\r\n          },\r\n        },\r\n      ]}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nconst More = ({ project }: { project: Project }) => {\r\n  const { startEdit } = useProjectModal();\r\n  const editProject = (id: number) => startEdit(id);\r\n  const { mutate: deleteProject } = useDelProject(useProjectsQueryKey());\r\n  const confirmDelProject = (id: number) => {\r\n    Modal.confirm({\r\n      title: \"确定删除这个项目吗？\",\r\n      content: \"点击确定删除\",\r\n      okText: \"确定\",\r\n      onOk() {\r\n        deleteProject(id);\r\n      },\r\n    });\r\n  };\r\n  return (\r\n    <Dropdown\r\n      overlay={\r\n        <Menu\r\n          items={[\r\n            {\r\n              key: \"edit\",\r\n              label: \"编辑\",\r\n              onClick: () => editProject(project.id),\r\n            },\r\n            {\r\n              key: \"del\",\r\n              label: \"删除\",\r\n              onClick: () => confirmDelProject(project.id),\r\n            },\r\n          ]}\r\n        />\r\n      }\r\n    >\r\n      <ButtonNoPadding type={\"link\"}>...</ButtonNoPadding>\r\n    </Dropdown>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { SearchPanel } from \"./search-panel\";\r\nimport { List } from \"./list\";\r\nimport { useDebounce, useDocumentTitle } from \"../../utils\";\r\nimport { useProjects } from \"../../utils/project\";\r\nimport { useUsers } from \"../../utils/user\";\r\nimport { useProjectModal, useProjectsSearchParam } from \"./util\";\r\nimport {\r\n  ButtonNoPadding,\r\n  ErrorBox,\r\n  PageContainer,\r\n  Row,\r\n} from \"../../components/lib\";\r\n\r\nexport const ProjectListPage = () => {\r\n  useDocumentTitle(\"项目列表\", false);\r\n\r\n  const [param, setParam] = useProjectsSearchParam();\r\n  //外部如何获取共享数据，引起状态提升\r\n  const debounceParam = useDebounce(param, 200);\r\n  // 重新刷新一遍\r\n  const {\r\n    isLoading,\r\n    error,\r\n    data: list /*, retry*/,\r\n  } = useProjects(debounceParam);\r\n  const { data: users } = useUsers();\r\n\r\n  const { open } = useProjectModal();\r\n  // // 监听param改变，触发时重新请求数据\r\n  // useEffect(() => {\r\n  //   run(\r\n  //     client(\"projects\", { data: cleanObject(debounceParam) })\r\n  //   );\r\n  //   //   .then(setList)\r\n  //   // setIsLoading(true);\r\n  //   // client(\"projects\", { data: cleanObject(debounceParam) })\r\n  //   //   .then(setList)\r\n  //   //   .catch((error) => {\r\n  //   //     setList([]);\r\n  //   //     setError(error);\r\n  //   //   })\r\n  //   //   .finally(() => setIsLoading(false));\r\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  // }, [debounceParam]);\r\n\r\n  return (\r\n    <PageContainer>\r\n      {/*<Helmet>*/}\r\n      {/*  <title>项目列表</title>*/}\r\n      {/*</Helmet>*/}\r\n      <Row between>\r\n        <h1>项目列表</h1>\r\n        <ButtonNoPadding onClick={open} type={\"link\"}>\r\n          创建项目\r\n        </ButtonNoPadding>\r\n      </Row>\r\n      <SearchPanel users={users || []} param={param} setParam={setParam} />\r\n      <ErrorBox error={error} />\r\n      <List\r\n        /* refresh={retry}*/\r\n        loading={isLoading}\r\n        dataSource={list || []}\r\n        users={users || []}\r\n      />\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nProjectListPage.whyDidYouRender = false;\r\n","import { Kanban } from \"../types\";\r\nimport { useHTTP } from \"./http\";\r\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport {\r\n  useAddConfig,\r\n  useDelConfig,\r\n  useReorderKanbanConfig,\r\n} from \"./use-optimistic-options\";\r\n\r\nexport const useKanbans = (param?: Partial<Kanban>) => {\r\n  const client = useHTTP();\r\n  return useQuery<Kanban[], Error>([\"kanbans\", param], () =>\r\n    client(\"kanbans\", { data: param })\r\n  );\r\n};\r\nexport const useAddKanban = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n\r\n  return useMutation(\r\n    (params: Partial<Kanban>) =>\r\n      client(`kanbans`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n};\r\nexport const useDeleteKanban = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n\r\n  return useMutation(\r\n    ({ id }: { id: number }) =>\r\n      client(`kanbans/${id}`, {\r\n        method: \"DELETE\",\r\n      }),\r\n    useDelConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport interface SortProps {\r\n  // 要重新排序的 item\r\n  fromId: number;\r\n  // 目标 item\r\n  toId: number;\r\n  // 放在目标item的前还是后\r\n  type: \"before\" | \"after\";\r\n  fromKanbanId?: number;\r\n  toKanbanId?: number;\r\n}\r\n\r\nexport const useReorderKanban = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n  return useMutation((params: SortProps) => {\r\n    return client(\"kanbans/reorder\", {\r\n      data: {\r\n        fromId: params.fromId,\r\n        referenceId: params.toId,\r\n        type: params.type,\r\n      },\r\n      method: \"POST\",\r\n    });\r\n  }, useReorderKanbanConfig(queryKey));\r\n};\r\n","import { Project, Task } from \"../types\";\r\nimport { useHTTP } from \"./http\";\r\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport {\r\n  useAddConfig,\r\n  useDelConfig,\r\n  useEditConfig,\r\n  useReorderTaskConfig,\r\n} from \"./use-optimistic-options\";\r\nimport { SortProps } from \"./kanbans\";\r\nimport { useDebounce } from \"./index\";\r\n\r\nexport const useTask = (id?: number) => {\r\n  const client = useHTTP();\r\n  return useQuery<Project>(\r\n    [\"task\", { id }],\r\n    () => client(`tasks/${id}`),\r\n    // id不为空时才会触发\r\n    { enabled: Boolean(id) }\r\n  );\r\n};\r\n\r\nexport const useTasks = (param?: Partial<Task>) => {\r\n  const client = useHTTP();\r\n  const debouncedParam = { ...param, name: useDebounce(param?.name, 200) };\r\n\r\n  return useQuery<Task[]>([\"tasks\", debouncedParam], () =>\r\n    client(\"tasks\", { data: debouncedParam })\r\n  );\r\n};\r\n\r\nexport const useAddTask = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n\r\n  return useMutation(\r\n    (params: Partial<Task>) =>\r\n      client(`tasks`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n};\r\nexport const useEditTask = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n  return useMutation(\r\n    (params: Partial<Task>) =>\r\n      client(`tasks/${params.id}`, {\r\n        method: \"PATCH\",\r\n        data: params,\r\n      }),\r\n    useEditConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useDeleteTask = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n\r\n  return useMutation(\r\n    ({ id }: { id: number }) =>\r\n      client(`tasks/${id}`, {\r\n        method: \"DELETE\",\r\n      }),\r\n    useDelConfig(queryKey)\r\n  );\r\n};\r\n\r\nexport const useReorderTask = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n  return useMutation((params: SortProps) => {\r\n    return client(\"tasks/reorder\", {\r\n      data: {\r\n        fromId: params.fromId,\r\n        referenceId: params.toId,\r\n        type: params.type,\r\n        fromKanbanId: params.fromKanbanId,\r\n        toKanbanId: params.toKanbanId,\r\n      },\r\n      method: \"POST\",\r\n    });\r\n  }, useReorderTaskConfig(queryKey));\r\n};\r\n","import { useLocation } from \"react-router\";\r\nimport { useProject } from \"../../utils/project\";\r\nimport { useQueryParam } from \"../../utils/url\";\r\nimport { useCallback, useMemo } from \"react\";\r\nimport { useTask } from \"../../utils/tasks\";\r\n\r\nexport const useProjectIdInUrl = () => {\r\n  const { pathname } = useLocation();\r\n  const id = pathname.match(/projects\\/(\\d+)/)?.[1];\r\n  return Number(id);\r\n};\r\n\r\nexport const useProjectInUrl = () => useProject(useProjectIdInUrl());\r\n\r\nexport const useKanbanSearchParams = () => ({ projectId: useProjectIdInUrl() });\r\nexport const useKanbansQueryKey = () => [\"kanbans\", useKanbanSearchParams()];\r\n\r\nexport const useTaskSearchParams = () => {\r\n  const [param] = useQueryParam([\"name\", \"typeId\", \"processorId\", \"tagId\"]);\r\n  const projectId = useProjectIdInUrl();\r\n  return useMemo(\r\n    () => ({\r\n      projectId: projectId,\r\n      typeId: Number(param.typeId) || undefined,\r\n      processorId: Number(param.processorId) || undefined,\r\n      tagId: Number(param.tagId) || undefined,\r\n      name: param.name,\r\n    }),\r\n    [projectId, param]\r\n  );\r\n};\r\nexport const useTaskQueryKey = () => [\"tasks\", useTaskSearchParams()];\r\n\r\nexport const useTasksModal = () => {\r\n  const [{ editingTaskId }, setEditingTaskId] = useQueryParam([\r\n    \"editingTaskId\",\r\n  ]);\r\n  const { data: editingTask, isLoading } = useTask(Number(editingTaskId));\r\n  const startEdit = useCallback(\r\n    (id: number) => {\r\n      setEditingTaskId({ editingTaskId: id });\r\n    },\r\n    [setEditingTaskId]\r\n  );\r\n  const close = useCallback(() => {\r\n    setEditingTaskId({ editingTaskId: \"\" });\r\n  }, [setEditingTaskId]);\r\n  return {\r\n    editingTaskId,\r\n    editingTask,\r\n    startEdit,\r\n    close,\r\n    isLoading,\r\n  };\r\n};\r\n","import { TaskType } from \"../types\";\r\nimport { useHTTP } from \"./http\";\r\nimport { useQuery } from \"react-query\";\r\n\r\nexport const useTaskTypes = () => {\r\n  const client = useHTTP();\r\n  return useQuery<TaskType[], Error>([\"taskTypes\"], () => client(\"taskTypes\"));\r\n};\r\n","var _desc, _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgTask(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"16px\",\n    height: \"16px\",\n    viewBox: \"0 0 16 16\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"task\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null)), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"task\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Task\",\n    transform: \"translate(1.000000, 1.000000)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle-36\",\n    fill: \"#4BADE8\",\n    x: 0,\n    y: 0,\n    width: 14,\n    height: 14,\n    rx: 2\n  }), /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    transform: \"translate(4.000000, 4.500000)\",\n    stroke: \"#FFFFFF\",\n    strokeWidth: 2,\n    strokeLinecap: \"round\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2,5 L6,0\",\n    id: \"Stroke-1\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M2,5 L0,3\",\n    id: \"Stroke-3\"\n  })))))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTask);\nexport default __webpack_public_path__ + \"static/media/task.a48202a2e4220cbed6055f852cd9fe7d.svg\";\nexport { ForwardRef as ReactComponent };","var _desc, _defs, _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBug(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"16px\",\n    height: \"16px\",\n    viewBox: \"0 0 16 16\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title === undefined ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, \"bug\") : title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _desc || (_desc = /*#__PURE__*/React.createElement(\"desc\", null, \"Created with Sketch.\")), _defs || (_defs = /*#__PURE__*/React.createElement(\"defs\", null)), _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Page-1\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"bug\"\n  }, /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Bug\",\n    transform: \"translate(1.000000, 1.000000)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle-36\",\n    fill: \"#E5493A\",\n    x: 0,\n    y: 0,\n    width: 14,\n    height: 14,\n    rx: 2\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10,7 C10,8.657 8.657,10 7,10 C5.343,10 4,8.657 4,7 C4,5.343 5.343,4 7,4 C8.657,4 10,5.343 10,7\",\n    id: \"Fill-2\",\n    fill: \"#FFFFFF\"\n  }))))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBug);\nexport default __webpack_public_path__ + \"static/media/bug.11605bc8d9f34a587f5918a035730618.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect, useState } from \"react\";\r\nimport { useAddTask } from \"../../utils/tasks\";\r\nimport { useProjectIdInUrl, useTaskQueryKey } from \"./util\";\r\nimport { Card, Input } from \"antd\";\r\n\r\nexport const CreateTask = ({ kanbanId }: { kanbanId: number }) => {\r\n  const [name, setName] = useState(\"\");\r\n  const { mutateAsync: addTask } = useAddTask(useTaskQueryKey());\r\n  const projectId = useProjectIdInUrl();\r\n  const [inputMode, setInputMode] = useState(false);\r\n\r\n  const submit = async () => {\r\n    await addTask({ projectId, name, kanbanId });\r\n    setInputMode(false);\r\n    setName(\"\");\r\n  };\r\n  const toggle = () => setInputMode((mode) => !mode);\r\n  useEffect(() => {\r\n    if (!inputMode) {\r\n      setName(\"\");\r\n    }\r\n  }, [inputMode]);\r\n\r\n  if (!inputMode) {\r\n    return <div onClick={toggle}>+创建事务</div>;\r\n  }\r\n  return (\r\n    <Card>\r\n      <Input\r\n        onBlur={toggle}\r\n        placeholder={\"需要做些什么\"}\r\n        autoFocus={true}\r\n        onPressEnter={submit}\r\n        value={name}\r\n        onChange={(evt) => setName(evt.target.value)}\r\n      />\r\n    </Card>\r\n  );\r\n};\r\n","export const Mark = ({ name, keyword }: { name: string; keyword: string }) => {\r\n  if (!keyword) return <>{name}</>;\r\n  const arr = name.split(keyword);\r\n  return (\r\n    <>\r\n      {arr.map((str, index) => (\r\n        <span key={index}>\r\n          {str}\r\n          {index === arr.length - 1 ? null : (\r\n            <span style={{ color: \"#257AFD\" }}>{keyword}</span>\r\n          )}\r\n        </span>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n","import React, { ReactNode } from \"react\";\r\nimport {\r\n  Draggable,\r\n  DraggableProps,\r\n  Droppable,\r\n  DroppableProps,\r\n  DroppableProvided,\r\n  DroppableProvidedProps,\r\n} from \"react-beautiful-dnd\";\r\n\r\ntype DropProps = Omit<DroppableProps, \"children\"> & { children: ReactNode };\r\n\r\nexport const Drop = ({ children, ...props }: DropProps) => {\r\n  return (\r\n    <Droppable {...props}>\r\n      {(provided) => {\r\n        if (React.isValidElement(children)) {\r\n          return React.cloneElement(children, {\r\n            ...provided.droppableProps,\r\n            ref: provided.innerRef,\r\n            provided,\r\n          });\r\n        }\r\n        return <div />;\r\n      }}\r\n    </Droppable>\r\n  );\r\n};\r\n\r\ntype DropChildProps = Partial<\r\n  { provided: DroppableProvided } & DroppableProvidedProps\r\n> &\r\n  React.HTMLAttributes<HTMLDivElement>;\r\nexport const DropChild = React.forwardRef<HTMLDivElement, DropChildProps>(\r\n  ({ children, ...props }, ref) => (\r\n    <div ref={ref} {...props}>\r\n      {children}\r\n      {props.provided?.placeholder}\r\n    </div>\r\n  )\r\n);\r\n\r\ntype DragProps = Omit<DraggableProps, \"children\"> & { children: ReactNode };\r\nexport const Drag = ({ children, ...props }: DragProps) => {\r\n  return (\r\n    <Draggable {...props}>\r\n      {(provided) => {\r\n        if (React.isValidElement(children)) {\r\n          return React.cloneElement(children, {\r\n            ...provided.draggableProps,\r\n            ...provided.dragHandleProps,\r\n            ref: provided.innerRef,\r\n          });\r\n        }\r\n        return <div />;\r\n      }}\r\n    </Draggable>\r\n  );\r\n};\r\n","import { Kanban, Task } from \"../../types\";\r\nimport { useTasks } from \"../../utils/tasks\";\r\nimport { useKanbansQueryKey, useTaskSearchParams, useTasksModal } from \"./util\";\r\nimport { useTaskTypes } from \"../../utils/task-type\";\r\nimport taskIcon from \"assets/task.svg\";\r\nimport bugIcon from \"assets/bug.svg\";\r\nimport styled from \"@emotion/styled\";\r\nimport { Button, Card, Dropdown, Menu, Modal } from \"antd\";\r\nimport { CreateTask } from \"./create-task\";\r\nimport { Mark } from \"../../components/mark\";\r\nimport { useDeleteKanban } from \"../../utils/kanbans\";\r\nimport { Row } from \"../../components/lib\";\r\nimport { Drag, Drop, DropChild } from \"../../components/drag-drop\";\r\nimport React from \"react\";\r\n\r\nconst TaskTypeIcon = ({ id }: { id: number }) => {\r\n  const { data: taskTypes } = useTaskTypes();\r\n  const name = taskTypes?.find((taskType) => taskType.id === id)?.name;\r\n  if (!name) return null;\r\n  return <img src={name === \"task\" ? taskIcon : bugIcon} alt={\"task-icon\"} />;\r\n};\r\n\r\nconst TaskCard = ({ task }: { task: Task }) => {\r\n  const { startEdit } = useTasksModal();\r\n  const { name: keyword } = useTaskSearchParams();\r\n  return (\r\n    <Card\r\n      onClick={() => startEdit(task.id)}\r\n      style={{ marginBottom: \"0.5rem\", cursor: \"pointer\" }}\r\n      key={task.id}\r\n    >\r\n      <p>\r\n        <Mark keyword={keyword} name={task.name} />\r\n      </p>\r\n      <TaskTypeIcon id={task.typeId} />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport const KanbanColumn = React.forwardRef<\r\n  HTMLDivElement,\r\n  { kanban: Kanban }\r\n>(({ kanban, ...props }, ref) => {\r\n  // react query自动处理多组件queryKey的节流处理\r\n  const { data: allTasks } = useTasks(useTaskSearchParams());\r\n  const tasks = allTasks?.filter((task) => task.kanbanId === kanban.id);\r\n\r\n  return (\r\n    <Container {...props} ref={ref}>\r\n      <Row between={true}>\r\n        <h3>{kanban.name}</h3>\r\n        <More kanban={kanban} key={kanban.id} />\r\n      </Row>\r\n      <TaskContainer>\r\n        <Drop\r\n          type={\"ROW\"}\r\n          direction={\"vertical\"}\r\n          droppableId={String(kanban.id)}\r\n        >\r\n          <DropChild style={{ minHeight: \"1rem\" }}>\r\n            {tasks?.map((task, taskIndex) => (\r\n              <Drag\r\n                key={task.id}\r\n                index={taskIndex}\r\n                draggableId={\"task\" + task.id}\r\n              >\r\n                <div>\r\n                  <TaskCard key={task.id} task={task} />\r\n                </div>\r\n              </Drag>\r\n            ))}\r\n          </DropChild>\r\n        </Drop>\r\n        <CreateTask kanbanId={kanban.id} />\r\n      </TaskContainer>\r\n    </Container>\r\n  );\r\n});\r\n\r\nconst More = ({ kanban }: { kanban: Kanban }) => {\r\n  const { mutateAsync } = useDeleteKanban(useKanbansQueryKey());\r\n  const startDelete = () => {\r\n    Modal.confirm({\r\n      okText: \"确定\",\r\n      cancelText: \"取消\",\r\n      title: \"确定删除看板吗\",\r\n      onOk() {\r\n        return mutateAsync({ id: kanban.id });\r\n      },\r\n    });\r\n  };\r\n  const overlay = (\r\n    <Menu items={[{ key: \"del\", label: \"删除\", onClick: startDelete }]} />\r\n  );\r\n  return (\r\n    <Dropdown overlay={overlay}>\r\n      <Button type={\"link\"}>...</Button>\r\n    </Dropdown>\r\n  );\r\n};\r\n\r\nexport const Container = styled.div`\r\n  min-width: 27rem;\r\n  border-radius: 6px;\r\n  background-color: rgb(244, 245, 247);\r\n  display: flex;\r\n  flex-direction: column;\r\n  padding: 0.7rem 0.7rem 1rem;\r\n  margin-right: 1.5rem;\r\n`;\r\nconst TaskContainer = styled.div`\r\n  overflow: scroll;\r\n  flex: 1;\r\n\r\n  ::-webkit-scrollbar {\r\n    display: none;\r\n  }\r\n`;\r\n","import React from \"react\";\r\nimport { IDSelect } from \"./id-select\";\r\nimport { useTaskTypes } from \"../utils/task-type\";\r\n\r\nexport const TaskTypeSelect = (\r\n  props: React.ComponentProps<typeof IDSelect>\r\n) => {\r\n  const { data: taskTypes } = useTaskTypes();\r\n  return <IDSelect options={taskTypes || []} {...props} />;\r\n};\r\n","import { useTaskSearchParams } from \"./util\";\r\nimport { useSetUrlSearchParam } from \"../../utils/url\";\r\nimport { Row } from \"../../components/lib\";\r\nimport { Button, Input } from \"antd\";\r\nimport { UserSelect } from \"../../components/user-select\";\r\nimport { TaskTypeSelect } from \"../../components/task-type-select\";\r\n\r\nexport const SearchPanel = () => {\r\n  const searchParams = useTaskSearchParams();\r\n  const setSearchParams = useSetUrlSearchParam();\r\n  const reset = () => {\r\n    setSearchParams({\r\n      typeId: undefined,\r\n      processorId: undefined,\r\n      tagId: undefined,\r\n      name: undefined,\r\n    });\r\n  };\r\n  return (\r\n    <Row marginBottom={4} gap={true}>\r\n      <Input\r\n        style={{ width: \"20rem\" }}\r\n        placeholder={\"任务名\"}\r\n        value={searchParams.name}\r\n        onChange={(evt) => setSearchParams({ name: evt.target.value })}\r\n      />\r\n      <UserSelect\r\n        defaultOptionName={\"经办人\"}\r\n        value={searchParams.processorId}\r\n        onChange={(value) => {\r\n          setSearchParams({ processorId: value });\r\n        }}\r\n      />\r\n      <TaskTypeSelect\r\n        defaultOptionName={\"类型\"}\r\n        value={searchParams.typeId}\r\n        onChange={(value) => setSearchParams({ typeId: value })}\r\n      />\r\n      <Button onClick={reset}>清除筛选</Button>\r\n    </Row>\r\n  );\r\n};\r\n","import { useState } from \"react\";\r\nimport { useKanbansQueryKey, useProjectIdInUrl } from \"./util\";\r\nimport { useAddKanban } from \"../../utils/kanbans\";\r\nimport { Input } from \"antd\";\r\nimport { Container } from \"./kanban-column\";\r\n\r\nexport const CreateKanban = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const projectId = useProjectIdInUrl();\r\n  const { mutateAsync: addKanban } = useAddKanban(useKanbansQueryKey());\r\n\r\n  const submit = async () => {\r\n    await addKanban({ name, projectId });\r\n    setName(\"\");\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Input\r\n        size={\"large\"}\r\n        placeholder={\"新建看板名称\"}\r\n        onPressEnter={submit}\r\n        value={name}\r\n        onChange={(evt) => setName(evt.target.value)}\r\n      />\r\n    </Container>\r\n  );\r\n};\r\n","import { useForm } from \"antd/es/form/Form\";\r\nimport { useTaskQueryKey, useTasksModal } from \"./util\";\r\nimport { useDeleteTask, useEditTask } from \"../../utils/tasks\";\r\nimport { useEffect } from \"react\";\r\nimport { Button, Form, Input, Modal } from \"antd\";\r\nimport { UserSelect } from \"../../components/user-select\";\r\nimport { TaskTypeSelect } from \"../../components/task-type-select\";\r\n\r\nconst layout = {\r\n  labelCol: { span: 9 },\r\n  wrapperCol: { span: 16 },\r\n};\r\nexport const TaskModal = () => {\r\n  const [form] = useForm();\r\n  const { editingTaskId, editingTask, close } = useTasksModal();\r\n  const { mutateAsync: editTask, isLoading: editLoading } = useEditTask(\r\n    useTaskQueryKey()\r\n  );\r\n  const { mutateAsync: delTask } = useDeleteTask(useTaskQueryKey());\r\n  const onCancel = () => {\r\n    close();\r\n    form.resetFields();\r\n  };\r\n  const onOK = async () => {\r\n    await editTask({ ...editingTask, ...form.getFieldsValue() });\r\n    close();\r\n  };\r\n  const startDelete = () => {\r\n    close();\r\n    Modal.confirm({\r\n      okText: \"确定\",\r\n      cancelText: \"取消\",\r\n      title: \"确定删除任务吗\",\r\n      onOk() {\r\n        return delTask({ id: Number(editingTaskId) });\r\n      },\r\n    });\r\n  };\r\n  useEffect(() => {\r\n    form.setFieldsValue(editingTask);\r\n  }, [form, editingTask]);\r\n  return (\r\n    <Modal\r\n      forceRender={true}\r\n      onOk={onOK}\r\n      onCancel={onCancel}\r\n      okText={\"确认\"}\r\n      cancelText={\"取消\"}\r\n      confirmLoading={editLoading}\r\n      title={\"编辑任务\"}\r\n      visible={!!editingTaskId}\r\n    >\r\n      <Form {...layout} initialValues={editingTask} form={form}>\r\n        <Form.Item\r\n          label={\"任务名\"}\r\n          name={\"name\"}\r\n          rules={[{ required: true, message: \"请输入任务名\" }]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n        <Form.Item label={\"经办人\"} name={\"processorId\"}>\r\n          <UserSelect defaultOptionName={\"经办人\"} />\r\n        </Form.Item>\r\n        <Form.Item label={\"类型\"} name={\"typeId\"}>\r\n          <TaskTypeSelect />\r\n        </Form.Item>\r\n      </Form>\r\n      <div style={{ textAlign: \"right\" }}>\r\n        <Button\r\n          onClick={startDelete}\r\n          style={{ fontSize: \"14px\" }}\r\n          size={\"small\"}\r\n        >\r\n          {\" \"}\r\n          删除\r\n        </Button>\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n","import { useDocumentTitle } from \"../../utils\";\r\nimport { useKanbans, useReorderKanban } from \"../../utils/kanbans\";\r\nimport {\r\n  useKanbanSearchParams,\r\n  useKanbansQueryKey,\r\n  useProjectInUrl,\r\n  useTaskQueryKey,\r\n  useTaskSearchParams,\r\n} from \"./util\";\r\nimport { KanbanColumn } from \"./kanban-column\";\r\nimport styled from \"@emotion/styled\";\r\nimport { SearchPanel } from \"./search-panel\";\r\nimport { useReorderTask, useTasks } from \"../../utils/tasks\";\r\nimport { Spin } from \"antd\";\r\nimport { PageContainer } from \"../../components/lib\";\r\nimport { CreateKanban } from \"./create-kanban\";\r\nimport { TaskModal } from \"./task-modal\";\r\nimport { DragDropContext, DropResult } from \"react-beautiful-dnd\";\r\nimport { Drag, Drop, DropChild } from \"components/drag-drop\";\r\nimport { useCallback } from \"react\";\r\n\r\nexport const KanbanPage = () => {\r\n  useDocumentTitle(\"看板列表\");\r\n\r\n  const { data: curProject } = useProjectInUrl();\r\n  const { data: kanbans, isLoading: kanbanIsLoading } = useKanbans(\r\n    useKanbanSearchParams()\r\n  );\r\n  const { isLoading: taskIsLoading } = useTasks(useTaskSearchParams());\r\n  const isLoading = kanbanIsLoading || taskIsLoading;\r\n\r\n  const onDragEnd = useDragEnd();\r\n  return (\r\n    <DragDropContext onDragEnd={onDragEnd}>\r\n      <PageContainer>\r\n        <h1>{curProject?.name}看板</h1>\r\n        <SearchPanel />\r\n        {isLoading ? (\r\n          <Spin size={\"large\"} />\r\n        ) : (\r\n          <ColContainer>\r\n            <Drop\r\n              type={\"COLUMN\"}\r\n              direction={\"horizontal\"}\r\n              droppableId={\"kanban\"}\r\n            >\r\n              <DropChild style={{ display: \"flex\" }}>\r\n                {kanbans?.map((kanban, index) => (\r\n                  <Drag\r\n                    key={kanban.id}\r\n                    draggableId={\"kanban\" + kanban.id}\r\n                    index={index}\r\n                  >\r\n                    <KanbanColumn kanban={kanban} key={kanban.id} />\r\n                  </Drag>\r\n                ))}\r\n              </DropChild>\r\n            </Drop>\r\n            <CreateKanban />\r\n          </ColContainer>\r\n        )}\r\n        <TaskModal />\r\n      </PageContainer>\r\n    </DragDropContext>\r\n  );\r\n};\r\nexport const ColContainer = styled.div`\r\n  display: flex;\r\n  overflow-x: scroll;\r\n  flex: 1;\r\n`;\r\n\r\nexport const useDragEnd = () => {\r\n  const { data: kanbans } = useKanbans(useKanbanSearchParams());\r\n  const { mutate: reorderKanban } = useReorderKanban(useKanbansQueryKey());\r\n  const { mutate: reorderTask } = useReorderTask(useTaskQueryKey());\r\n  const { data: allTasks = [] } = useTasks(useTaskSearchParams());\r\n\r\n  return useCallback(\r\n    ({ source, destination, type }: DropResult) => {\r\n      if (!destination) {\r\n        return;\r\n      }\r\n      // 看板排序\r\n      if (type === \"COLUMN\") {\r\n        const fromId = kanbans?.[source.index].id;\r\n        const toId = kanbans?.[destination.index].id;\r\n        if (!fromId || !toId || fromId === toId) {\r\n          return;\r\n        }\r\n        const type = destination.index > source.index ? \"after\" : \"before\";\r\n        reorderKanban({ fromId, toId, type });\r\n      }\r\n      if (type === \"ROW\") {\r\n        const fromKanbanId = +source.droppableId;\r\n        const toKanbanId = +destination.droppableId;\r\n\r\n        const fromTask = allTasks.filter(\r\n          (task) => task.kanbanId === fromKanbanId\r\n        )[source.index];\r\n\r\n        const toTask = allTasks.filter((task) => task.kanbanId === toKanbanId)[\r\n          destination.index\r\n        ];\r\n\r\n        if (fromTask?.id === toTask?.id) {\r\n          return;\r\n        }\r\n        reorderTask({\r\n          fromId: fromTask?.id,\r\n          toId: toTask?.id,\r\n          fromKanbanId,\r\n          toKanbanId,\r\n          type: destination.index > source.index ? \"after\" : \"before\",\r\n        });\r\n      }\r\n    },\r\n    [kanbans, reorderKanban, allTasks, reorderTask]\r\n  );\r\n};\r\n","import { useProjectIdInUrl } from \"../kanban/util\";\r\n\r\nexport const useEpicSearchParams = () => ({ projectId: useProjectIdInUrl() });\r\nexport const useEpicQueryKey = () => [\"epics\", useEpicSearchParams()];\r\n","import { Button, Drawer, Form, Input, Spin } from \"antd\";\r\nimport { useProjectModal, useProjectsQueryKey } from \"./util\";\r\nimport { UserSelect } from \"../../components/user-select\";\r\nimport { useAddProject, useEditProject } from \"../../utils/project\";\r\nimport { useForm } from \"antd/es/form/Form\";\r\nimport React, { useEffect } from \"react\";\r\nimport { ErrorBox } from \"../../components/lib\";\r\nimport styled from \"@emotion/styled\";\r\n\r\nexport const ProjectModal = () => {\r\n  const { projectModalOpen, close, editingProject, isLoading } =\r\n    useProjectModal();\r\n  const useMutateProject = editingProject ? useEditProject : useAddProject;\r\n\r\n  const {\r\n    mutateAsync,\r\n    error,\r\n    isLoading: mutateLoading,\r\n  } = useMutateProject(useProjectsQueryKey());\r\n  const [form] = useForm();\r\n\r\n  const onFinish = (values: any) => {\r\n    mutateAsync({ ...editingProject, ...values }).then(() => {\r\n      form.resetFields();\r\n      close();\r\n    });\r\n  };\r\n  const onClose = () => {\r\n    form.resetFields();\r\n    close();\r\n  };\r\n\r\n  const title = editingProject ? \"编辑项目\" : \"创建项目\";\r\n\r\n  useEffect(() => {\r\n    form.setFieldsValue(editingProject);\r\n  }, [editingProject, form]);\r\n\r\n  return (\r\n    <Drawer\r\n      forceRender={true}\r\n      onClose={onClose}\r\n      visible={projectModalOpen}\r\n      width={\"100%\"}\r\n    >\r\n      <Container>\r\n        {isLoading ? (\r\n          <Spin size={\"large\"} />\r\n        ) : (\r\n          <>\r\n            <h1>{title}</h1>\r\n            <ErrorBox error={error} />\r\n            <Form\r\n              form={form}\r\n              layout={\"vertical\"}\r\n              style={{ width: \"40rem\" }}\r\n              onFinish={onFinish}\r\n            >\r\n              <Form.Item\r\n                label={\"名称\"}\r\n                name={\"name\"}\r\n                rules={[{ required: true, message: \"请输入项目名\" }]}\r\n              >\r\n                <Input placeholder={\"请输入项目名\"} />\r\n              </Form.Item>\r\n              <Form.Item\r\n                label={\"部门\"}\r\n                name={\"organization\"}\r\n                rules={[{ required: true, message: \"请输入部门名\" }]}\r\n              >\r\n                <Input placeholder={\"请输入部门名\"} />\r\n              </Form.Item>\r\n              <Form.Item label={\"负责人\"} name={\"personId\"}>\r\n                <UserSelect defaultOptionName={\"负责人\"} />\r\n              </Form.Item>\r\n              <Form.Item style={{ textAlign: \"right\" }}>\r\n                <Button\r\n                  loading={mutateLoading}\r\n                  type={\"primary\"}\r\n                  htmlType={\"submit\"}\r\n                >\r\n                  提交\r\n                </Button>\r\n              </Form.Item>\r\n            </Form>\r\n          </>\r\n        )}\r\n      </Container>\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport const Container = styled.div`\r\n  flex-direction: column;\r\n  height: 80vh;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n","import { Button, Drawer, DrawerProps, Form, Input } from \"antd\";\r\nimport { Container } from \"../project-list/project-modal\";\r\nimport { ErrorBox } from \"../../components/lib\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useAddEpic } from \"../../utils/epic\";\r\nimport { useEpicQueryKey } from \"./util\";\r\nimport { useForm } from \"antd/es/form/Form\";\r\nimport { useProjectIdInUrl } from \"../kanban/util\";\r\n\r\nexport const CreateEpic = (\r\n  props: Pick<DrawerProps, \"visible\"> & { onClose: () => void }\r\n) => {\r\n  const { mutate: addEpic, isLoading, error } = useAddEpic(useEpicQueryKey());\r\n  const [form] = useForm();\r\n  const projectId = useProjectIdInUrl();\r\n\r\n  const onFinish = async (values: any) => {\r\n    await addEpic({ ...values, projectId: projectId });\r\n    props.onClose();\r\n  };\r\n\r\n  useEffect(() => {\r\n    form.resetFields();\r\n  }, [form, props.visible]);\r\n\r\n  return (\r\n    <Drawer\r\n      visible={props.visible}\r\n      onClose={props.onClose}\r\n      forceRender={true}\r\n      destroyOnClose={true}\r\n      width={\"100%\"}\r\n    >\r\n      <Container>\r\n        <h1>创建任务组</h1>\r\n        <ErrorBox error={error} />\r\n        <Form\r\n          form={form}\r\n          layout={\"vertical\"}\r\n          style={{ width: \"40rem\" }}\r\n          onFinish={onFinish}\r\n        >\r\n          <Form.Item\r\n            label={\"名称\"}\r\n            name={\"name\"}\r\n            rules={[{ required: true, message: \"请输入任务组名\" }]}\r\n          >\r\n            <Input placeholder={\"请输入任务组名\"} />\r\n          </Form.Item>\r\n          <Form.Item style={{ textAlign: \"right\" }}>\r\n            <Button loading={isLoading} type={\"primary\"} htmlType={\"submit\"}>\r\n              提交\r\n            </Button>\r\n          </Form.Item>\r\n        </Form>\r\n      </Container>\r\n    </Drawer>\r\n  );\r\n};\r\n","import { Epic } from \"../types\";\r\nimport { useHTTP } from \"./http\";\r\nimport { QueryKey, useMutation, useQuery } from \"react-query\";\r\nimport { useAddConfig, useDelConfig } from \"./use-optimistic-options\";\r\n\r\nexport const useEpics = (param?: Partial<Epic>) => {\r\n  const client = useHTTP();\r\n  return useQuery<Epic[], Error>([\"epics\", param], () =>\r\n    client(\"epics\", { data: param })\r\n  );\r\n};\r\nexport const useAddEpic = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n\r\n  return useMutation(\r\n    (params: Partial<Epic>) =>\r\n      client(`epics`, {\r\n        data: params,\r\n        method: \"POST\",\r\n      }),\r\n    useAddConfig(queryKey)\r\n  );\r\n};\r\nexport const useDeleteEpic = (queryKey: QueryKey) => {\r\n  const client = useHTTP();\r\n\r\n  return useMutation(\r\n    ({ id }: { id: number }) =>\r\n      client(`epics/${id}`, {\r\n        method: \"DELETE\",\r\n      }),\r\n    useDelConfig(queryKey)\r\n  );\r\n};\r\n","import { PageContainer, Row } from \"../../components/lib\";\r\nimport { useDocumentTitle } from \"../../utils\";\r\nimport { useProjectInUrl } from \"../kanban/util\";\r\nimport { useDeleteEpic, useEpics } from \"../../utils/epic\";\r\nimport { useEpicQueryKey, useEpicSearchParams } from \"./util\";\r\nimport { Button, List, Modal } from \"antd\";\r\nimport dayjs from \"dayjs\";\r\nimport { useTasks } from \"../../utils/tasks\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { CreateEpic } from \"./create-epic\";\r\nimport { useState } from \"react\";\r\n\r\nexport const EpicPage = () => {\r\n  useDocumentTitle(\"任务组\");\r\n  const { data: curProject } = useProjectInUrl();\r\n  const { data: epics } = useEpics(useEpicSearchParams());\r\n  const { data: tasks } = useTasks({ projectId: curProject?.id });\r\n  const { mutate: delEpic } = useDeleteEpic(useEpicQueryKey());\r\n  const [epicCreateOpen, setEpicCreateOpen] = useState(false);\r\n\r\n  const confirmDelete = (id: number) => {\r\n    Modal.confirm({\r\n      okText: \"确定\",\r\n      cancelText: \"取消\",\r\n      title: \"确定删除看板吗\",\r\n      onOk() {\r\n        return delEpic({ id: id });\r\n      },\r\n    });\r\n  };\r\n  return (\r\n    <PageContainer>\r\n      <Row between>\r\n        <h1>{curProject?.name}任务组</h1>\r\n        <Button type={\"link\"} onClick={() => setEpicCreateOpen(true)}>\r\n          创建任务组\r\n        </Button>\r\n      </Row>\r\n\r\n      <List\r\n        style={{ overflow: \"scroll\" }}\r\n        dataSource={epics}\r\n        itemLayout={\"vertical\"}\r\n        renderItem={(epic) => (\r\n          <List.Item key={epic.id}>\r\n            <List.Item.Meta\r\n              title={\r\n                <Row between>\r\n                  <span>{epic.name}</span>\r\n                  <Button type={\"link\"} onClick={() => confirmDelete(epic?.id)}>\r\n                    删除\r\n                  </Button>\r\n                </Row>\r\n              }\r\n              description={\r\n                <div>\r\n                  <div>开始时间：{dayjs(epic.start).format(\"YYYY-MM-DD\")}</div>\r\n                  <div>结束时间：{dayjs(epic.end).format(\"YYYY-MM-DD\")}</div>\r\n                </div>\r\n              }\r\n            />\r\n            <div>\r\n              {tasks\r\n                ?.filter((task) => task.epicId === epic.id)\r\n                .map((task) => (\r\n                  <p>\r\n                    <Link\r\n                      key={task.id}\r\n                      to={`/projects/${curProject?.id}/kanban?editingTaskId=${task.id}`}\r\n                    >\r\n                      {task.name}\r\n                    </Link>\r\n                  </p>\r\n                ))}\r\n            </div>\r\n          </List.Item>\r\n        )}\r\n      />\r\n      <CreateEpic\r\n        onClose={() => setEpicCreateOpen(false)}\r\n        visible={epicCreateOpen}\r\n      />\r\n    </PageContainer>\r\n  );\r\n};\r\n","import { Link } from \"react-router-dom\";\r\nimport { Route, Routes, Navigate, useLocation } from \"react-router\";\r\nimport { KanbanPage } from \"../kanban\";\r\nimport { EpicPage } from \"../epic\";\r\nimport styled from \"@emotion/styled\";\r\nimport { Menu } from \"antd\";\r\n\r\n/**\r\n *  方便Menu组件识别路由\r\n */\r\nconst useRouteType = () => {\r\n  const units = useLocation().pathname.split(\"/\");\r\n  return units[units.length - 1];\r\n};\r\n\r\nexport const ProjectPage = () => {\r\n  const routeType = useRouteType();\r\n  return (\r\n    <Container>\r\n      <Aside>\r\n        <Menu\r\n          mode={\"inline\"}\r\n          selectedKeys={[routeType]}\r\n          items={[\r\n            {\r\n              key: \"kanban\",\r\n              label: <Link to={\"kanban\"}>看板</Link>,\r\n            },\r\n            {\r\n              key: \"epic\",\r\n              label: <Link to={\"epic\"}>任务组</Link>,\r\n            },\r\n          ]}\r\n        />\r\n      </Aside>\r\n      <Main>\r\n        <Routes>\r\n          <Route path={\"/kanban\"} element={<KanbanPage />} />\r\n          <Route path={\"/epic\"} element={<EpicPage />} />\r\n          <Route path=\"*\" element={<Navigate to={\"kanban\"} replace={true} />} />\r\n        </Routes>\r\n      </Main>\r\n    </Container>\r\n  );\r\n};\r\nconst Aside = styled.aside`\r\n  background-color: rgb(244, 245, 247);\r\n  display: flex;\r\n`;\r\nconst Main = styled.main`\r\n  box-shadow: -5px 0 5px -5px rgba(0, 0, 0, 0.1);\r\n  display: flex;\r\n  // 防止向外伸展\r\n  overflow: hidden;\r\n`;\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 16rem 1fr;\r\n  overflow: hidden;\r\n  width: 100%;\r\n`;\r\n","import { Divider, List, Popover, Typography } from \"antd\";\r\nimport { useProjects } from \"../utils/project\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useProjectModal } from \"../pages/project-list/util\";\r\nimport { ButtonNoPadding } from \"./lib\";\r\n\r\nexport const ProjectPopover = () => {\r\n  const { data: projects, refetch } = useProjects();\r\n  const pinnedProjects = projects?.filter((project) => project.pin);\r\n  const { open } = useProjectModal();\r\n  const content = (\r\n    <ContentContainer>\r\n      <Typography.Text type={\"secondary\"}>收藏项目</Typography.Text>\r\n      <List>\r\n        {pinnedProjects?.map((project) => (\r\n          <List.Item key={project.id}>\r\n            <List.Item.Meta title={project.name} />\r\n          </List.Item>\r\n        ))}\r\n      </List>\r\n      <Divider />\r\n      <ButtonNoPadding onClick={open} type={\"link\"}>\r\n        创建项目\r\n      </ButtonNoPadding>\r\n    </ContentContainer>\r\n  );\r\n  return (\r\n    <Popover\r\n      onVisibleChange={() => refetch()}\r\n      placement={\"bottom\"}\r\n      content={content}\r\n    >\r\n      <span>项目</span>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nconst ContentContainer = styled.div`\r\n  min-width: 30rem;\r\n`;\r\n","import { Divider, List, Popover, Typography } from \"antd\";\r\nimport styled from \"@emotion/styled\";\r\nimport { useUsers } from \"../utils/user\";\r\n\r\nexport const UserPopover = () => {\r\n  const { data: users, refetch } = useUsers();\r\n  const content = (\r\n    <ContentContainer>\r\n      <Typography.Text type={\"secondary\"}>组员列表</Typography.Text>\r\n      <List>\r\n        {users?.map((user) => (\r\n          <List.Item key={user.id}>\r\n            <List.Item.Meta title={user.name} />\r\n          </List.Item>\r\n        ))}\r\n      </List>\r\n      <Divider />\r\n    </ContentContainer>\r\n  );\r\n  return (\r\n    <Popover\r\n      onVisibleChange={() => refetch()}\r\n      placement={\"bottom\"}\r\n      content={content}\r\n    >\r\n      <span>组员</span>\r\n    </Popover>\r\n  );\r\n};\r\n\r\nconst ContentContainer = styled.div`\r\n  min-width: 30rem;\r\n`;\r\n","import { ProjectListPage } from \"./pages/project-list\";\r\nimport { useAuth } from \"./context/auth-context\";\r\nimport { Button, Dropdown, Menu } from \"antd\";\r\nimport styled from \"@emotion/styled\";\r\nimport { ButtonNoPadding, Row } from \"./components/lib\";\r\nimport { ReactComponent as Logo } from \"assets/logo.svg\";\r\nimport { Route, Routes, Navigate } from \"react-router\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { ProjectPage } from \"./pages/project\";\r\nimport { resetRoute } from \"./utils\";\r\nimport { ProjectModal } from \"./pages/project-list/project-modal\";\r\nimport { ProjectPopover } from \"./components/project-popover\";\r\nimport { UserPopover } from \"./components/user-popover\";\r\n\r\nexport default () => {\r\n  return (\r\n    <Container>\r\n      <BrowserRouter basename={\"/aJira\"}>\r\n        <PageHeader />\r\n        <Main>\r\n          {/*<Router>作为路由间共享信息的上下文*/}\r\n          <Routes>\r\n            <Route path={\"/projects\"} element={<ProjectListPage />} />\r\n            <Route path={\"/projects/:projectId/*\"} element={<ProjectPage />} />\r\n            {/*默认路由*/}\r\n            <Route path=\"*\" element={<Navigate to=\"/projects\" />} />\r\n          </Routes>\r\n        </Main>\r\n        {/*全局共享*/}\r\n        <ProjectModal />\r\n      </BrowserRouter>\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst PageHeader = () => {\r\n  return (\r\n    <Header between={true}>\r\n      <LeftHeader gap={true}>\r\n        <ButtonNoPadding type={\"link\"} onClick={resetRoute}>\r\n          <Logo width={\"10rem\"} height={\"3rem\"} />\r\n        </ButtonNoPadding>\r\n        <ProjectPopover />\r\n        <UserPopover />\r\n      </LeftHeader>\r\n      <RightHeader>\r\n        <User />\r\n      </RightHeader>\r\n    </Header>\r\n  );\r\n};\r\n\r\nconst User = () => {\r\n  const { logout, user } = useAuth();\r\n  return (\r\n    <Dropdown\r\n      overlay={\r\n        <Menu>\r\n          <Menu.Item key={\"logout\"}>\r\n            <Button type={\"link\"} onClick={logout}>\r\n              登出\r\n            </Button>\r\n          </Menu.Item>\r\n        </Menu>\r\n      }\r\n    >\r\n      <Button type={\"link\"} onClick={(e) => e.preventDefault()}>\r\n        {\" \"}\r\n        Hi, {user?.name}\r\n      </Button>\r\n    </Dropdown>\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  display: grid;\r\n  grid-template-rows: 6rem 1fr;\r\n  height: 100vh;\r\n`;\r\n\r\n//grid-area用于起名\r\nconst Header = styled(Row)`\r\n  padding: 3.2rem;\r\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\r\n  z-index: 1;\r\n`;\r\nconst LeftHeader = styled(Row)``;\r\nconst RightHeader = styled.div``;\r\n\r\nconst Main = styled.main`\r\n  display: flex;\r\n  overflow: hidden;\r\n`;\r\n"],"names":["_defs","_g","_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgLogo","_ref","svgRef","title","titleId","props","viewBox","xmlns","focusable","ref","id","x1","y1","x2","y2","stopColor","offset","stroke","strokeWidth","fillRule","d","fill","ForwardRef","useUsers","param","client","useHTTP","useQuery","data","IDSelect","value","onChange","defaultOptionName","options","restProps","toNumber","undefined","map","option","name","val","isNaN","Number","UserSelect","users","SearchPanel","setParam","style","marginBottom","layout","type","placeholder","evt","personId","Pin","checked","onCheckChange","count","num","Boolean","reorder","fromId","toId","list","clonedList","movingItemIndex","findIndex","item","insertAfter","targetIndex","insertBefore","from","to","toItem","removedItem","splice","toIndex","useOptimisticConfig","queryKey","callback","queryClient","useQueryClient","onSuccess","invalidateQueries","onMutate","previousItems","getQueryData","setQueryData","old","onError","error","newItem","context","useDelConfig","query","filter","useEditConfig","useAddConfig","useProjects","useEditProject","useMutation","params","method","useAddProject","useProject","enabled","useQueryParam","useSearchParams","searchParams","setUrlSearchParams","useSetUrlSearchParam","useMemo","reduce","prev","get","setSearchParams","o","cleanObject","fromEntries","useProjectsSearchParam","useProjectsQueryKey","useProjectModal","projectCreate","setProjectCreate","editingProjectId","setEditingProjectId","editingProject","isLoading","setUrlParams","projectModalOpen","open","close","startEdit","List","mutate","rowKey","pagination","columns","disabled","render","project","pin","sorter","a","b","localeCompare","v","String","dataIndex","find","user","created","dayjs","format","More","deleteProject","useDelProject","overlay","items","label","onClick","Modal","content","okText","onOk","ProjectListPage","useDocumentTitle","debounceParam","useDebounce","between","loading","dataSource","whyDidYouRender","useKanbans","useReorderKanban","referenceId","useReorderKanbanConfig","useTasks","debouncedParam","useReorderTask","fromKanbanId","toKanbanId","kanbanId","useReorderTaskConfig","useProjectIdInUrl","useLocation","pathname","match","useProjectInUrl","useKanbanSearchParams","projectId","useKanbansQueryKey","useTaskSearchParams","typeId","processorId","tagId","useTaskQueryKey","useTasksModal","editingTaskId","setEditingTaskId","useTask","editingTask","useCallback","useTaskTypes","CreateTask","useState","setName","addTask","useAddTask","mutateAsync","inputMode","setInputMode","submit","toggle","mode","useEffect","onBlur","autoFocus","onPressEnter","Mark","keyword","arr","split","str","index","color","Drop","children","provided","React","droppableProps","innerRef","DropChild","Drag","draggableProps","dragHandleProps","TaskTypeIcon","taskTypes","taskType","src","taskIcon","bugIcon","alt","TaskCard","task","cursor","KanbanColumn","kanban","allTasks","tasks","Container","TaskContainer","direction","droppableId","minHeight","taskIndex","draggableId","useDeleteKanban","cancelText","styled","TaskTypeSelect","gap","width","CreateKanban","addKanban","useAddKanban","size","labelCol","span","wrapperCol","TaskModal","useForm","form","useEditTask","editTask","editLoading","delTask","useDeleteTask","onOK","getFieldsValue","setFieldsValue","forceRender","onCancel","resetFields","confirmLoading","visible","initialValues","rules","required","message","textAlign","fontSize","KanbanPage","curProject","kanbans","kanbanIsLoading","taskIsLoading","onDragEnd","useDragEnd","ColContainer","display","reorderKanban","reorderTask","destination","fromTask","toTask","useEpicSearchParams","useEpicQueryKey","ProjectModal","mutateLoading","onClose","onFinish","values","then","htmlType","CreateEpic","useAddEpic","addEpic","destroyOnClose","EpicPage","epics","useEpics","delEpic","useDeleteEpic","epicCreateOpen","setEpicCreateOpen","overflow","itemLayout","renderItem","epic","description","start","end","epicId","ProjectPage","routeType","units","useRouteType","Aside","selectedKeys","Main","path","element","replace","ProjectPopover","projects","refetch","pinnedProjects","ContentContainer","onVisibleChange","placement","UserPopover","basename","PageHeader","Header","LeftHeader","resetRoute","height","RightHeader","User","useAuth","logout","e","preventDefault","Row"],"sourceRoot":""}